<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="regresar()">
        <ion-icon color="light" slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
      Detalle
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card-content>
    <ion-title class="ion-text-center"> <ion-label> Historial de Asistencia</ion-label></ion-title>
    <form [formGroup]="historialForm">
      <ion-grid>
        <ion-row>
          <ion-col size="6" size-sm="3">
            <ion-item>
              <ion-label position="floating">Fecha Inicio</ion-label>
              <ion-input type="date" placeholder="Ingrese su fecha inicio" formControlName="fecha_inicio"></ion-input>
              <ng-container
                *ngIf="historialForm.get('fecha_inicio')?.dirty || historialForm.get('fecha_inicio')?.touched">
                <ion-note slot="error" *ngIf="historialForm.get('fecha_inicio')?.errors?.['required']">
                  La fecha de inicio es requerido.
                </ion-note>
              </ng-container>
            </ion-item>
          </ion-col>

          <ion-col size="6" size-sm="3">
            <ion-item>
              <ion-label position="floating">Fecha Fin</ion-label>
              <ion-input type="date" placeholder="Ingrese su fecha fin" formControlName="fecha_fin"></ion-input>
              <ng-container *ngIf="historialForm.get('fecha_fin')?.dirty || historialForm.get('fecha_fin')?.touched">
                <ion-note slot="error" *ngIf="historialForm.get('fecha_fin')?.errors?.['required']">
                  La fecha es requerido.
                </ion-note>
              </ng-container>
            </ion-item>
          </ion-col>

          <ion-col size="6" size-sm="3">
            <ion-select style="margin-top: 10px;" label="Seleccione el tipo" formControlName="tipo_asistencia_id"
              label-placement="floating">
              <ion-select-option *ngFor="let la of listaTiposAsistencia" [value]="la.id">
                {{la.type}}
              </ion-select-option>
            </ion-select>
            <small
              *ngIf="historialForm.get('tipo_asistencia_id')?.dirty || historialForm.get('tipo_asistencia_id')?.touched">
              <ion-note color="danger" slot="error"
                *ngIf="historialForm.get('tipo_asistencia_id')?.errors?.['required']">
                El tipo es requerido.
              </ion-note>
            </small>
          </ion-col>

          <ion-row nowrap>
            <ion-col>
              <ion-fab-button size="small" fab-fixed color="primary" (click)="consultar()">
                <ion-icon name="checkmark-outline"></ion-icon>
              </ion-fab-button>
            </ion-col>
            <ion-col *ngIf="bandBtn">
              <ion-fab-button size="small" fab-fixed color="success">
                <ion-icon name="reader-outline" (click)="imprimir()"></ion-icon>
              </ion-fab-button>
            </ion-col>
          </ion-row>
        </ion-row>
      </ion-grid>
    </form>

    <ng-container *ngIf="band">
      <ion-card color="light">
        <ion-card-header>
          <ion-card-subtitle style="font-weight: bold; font-size: 14px; text-align: center;">
            Informaci√≥n del Personal
          </ion-card-subtitle>
        </ion-card-header>
        <ion-card-content mode="md">
  
          <ion-grid>
            <ion-row>
              <ion-col size="12" size-sm="4">
                <ion-row>
                  <ion-col size="6">
                    <ion-label>
                      <h2><strong>Cedula</strong></h2>
                      <p>{{datosPersonales?.persona.cedula}}</p>
                    </ion-label>
                  </ion-col>
                  <ion-col size="6">
                    <ion-label>
                      <h2><strong>Nombre</strong></h2>
                      <p>{{datosPersonales?.persona.nombres}}</p>
                    </ion-label>
                  </ion-col>
                </ion-row>
              </ion-col>
  
              <ion-col size="12" size-sm="4">
                <ion-row>
                  <ion-col size="6">
                    <ion-label>
                      <h2><strong>Apellido</strong></h2>
                      <p>{{datosPersonales?.persona.apellidos}}</p>
                    </ion-label>
                  </ion-col>
                  <ion-col size="6">
                    <ion-label>
                      <h2><strong>Telefono</strong></h2>
                      <p>{{datosPersonales?.persona.num_celular}}</p>
                    </ion-label>
                  </ion-col>
                </ion-row>
              </ion-col>
  
              <ion-col size="12" size-sm="4">
                <ion-row>
                  <ion-col size="6">
                    <ion-label>
                      <h2><strong>Email</strong></h2>
                      <p>{{ datosPersonales?.email}}</p>
                    </ion-label>
                  </ion-col>
                  <ion-col size="6">
                    <ion-label>
                      <h2><strong>Direccion</strong></h2>
                      <p>{{ datosPersonales?.persona.direccion}}</p>
                    </ion-label>
                  </ion-col>
                </ion-row>
              </ion-col>
  
            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>
  
      <ion-grid>
        <ion-row class="centerrow header-row">
          <ion-col size="2" style=" text-align: center; font-weight: bold;">#</ion-col>
          <ion-col size="3" style=" text-align: center; font-weight: bold;" tappable (click)="sortBy('fecha')">
            Fecha
            <ion-icon name="arrow-down" *ngIf="sortDirecion == 1"></ion-icon>
            <ion-icon name="arrow-up" *ngIf="sortDirecion == 2"></ion-icon>
          </ion-col>
          <ion-col size="3" style=" text-align: center; font-weight: bold;">
            Hora
          </ion-col>
          <ion-col size="2" class="ion-hide-md-down" style=" text-align: center;font-weight: bold;">
            Tipo
          </ion-col>
          <ion-col size="2" style=" text-align: center;font-weight: bold;">
            Accion
          </ion-col>
        </ion-row>
  
        <ion-row class="centerrow data-row" *ngFor="let item of data; let i = index">
          <ion-col size="2" style=" text-align: center; font-weight: bold;">{{ i + 1}}</ion-col>
          <ion-col size="3" style=" text-align: center;">{{item.fecha}}</ion-col>
          <ion-col size="3" style=" text-align: center;">{{item.hora}}</ion-col>
          <ion-col size="2" class="ion-hide-md-down" style=" text-align: center;">{{item.tipo_registro.tipo}}</ion-col>
          <ion-col size="2" style=" text-align: center;">
            <button ion-button icon-only class="btn_eye_icon">
              <ion-icon name="eye-outline"></ion-icon>
            </button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ng-container>
    

  </ion-card-content>


  <!--For-->

  <br>


  <div>
    <ion-grid fixed>
      <ion-row>
        <ion-col style=" text-align: center; font-weight: bold;" size="4">Fecha Inicio</ion-col>
        <ion-col style=" text-align: center; font-weight: bold;" size="4">Fecha Fin</ion-col>
        <ion-col style=" text-align: center; font-weight: bold;" size="4">Asistencia</ion-col>
      </ion-row>
    </ion-grid>

    <div class="ion-text-center">

      <ion-button mode="ios" fill="clear">
        <ion-label style="font-weight: bold; color: black;">Buscar</ion-label>
      </ion-button>
    </div>


  </div>


  <ion-card>
    <ion-card-header>
      <ion-card-subtitle>Awesome Subtitle</ion-card-subtitle>
      <ion-card-title>Awesome Title</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid fixed>
        <ion-row>
          <ion-col size="6">
            
          </ion-col>
          <ion-col size="6"></ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>






</ion-content>